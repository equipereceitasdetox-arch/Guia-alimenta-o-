<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Guia de alimenta√ß√£o saud√°vel com sugest√µes de refei√ß√µes por objetivo: emagrecimento, ganho de massa e manuten√ß√£o." />
  <title>üå± Guia de Alimenta√ß√£o Saud√°vel</title>
  <style>
    /* Reset e fonte */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html,body { height: 100%; }
    body {
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(to bottom, #e0f7fa, #f1f8e9);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: #1f2937;
    }

    /* Container principal */
    .container {
      width: 100%;
      max-width: 560px;
      background: #ffffffcc;
      border-radius: 18px;
      padding: 26px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.12);
      display: flex;
      flex-direction: column;
      gap: 18px;
      animation: fadeIn 400ms ease;
    }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(14px);} to { opacity: 1; transform: translateY(0);} }

    header h1 {
      color: #2e7d32;
      text-align: center;
      font-size: 1.6rem;
      margin-bottom: 4px;
    }
    header p.lead {
      text-align: center;
      color: #334155;
      font-size: 0.95rem;
    }

    .section {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .btn-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
      transition: transform 160ms ease, box-shadow 160ms ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.06);
      min-width: 140px;
      text-align: left;
    }
    button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); }
    button:focus { outline: 3px solid #90caf9; outline-offset: 2px; }

    .objetivo-btn { background: #81c784; color: white; flex: 1 1 30%; }
    .refeicao-btn { background: #4fc3f7; color: white; flex: 1 1 40%; }

    .resultado {
      background: #fff8e1;
      border-radius: 12px;
      padding: 16px;
      text-align: left;
      color: #bf360c;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      font-weight: 600;
      min-height: 56px;
      display: flex;
      align-items: center;
    }

    .footer {
      text-align: center;
      font-size: 0.88rem;
      color: #374151;
      margin-top: 6px;
    }

    .controls {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 6px;
    }

    .secondary {
      background: #e5e7eb;
      color: #111827;
      padding: 8px 12px;
      border-radius: 10px;
      font-weight: 600;
      box-shadow: none;
    }

    @media (max-width: 420px) {
      button { min-width: 100%; text-align: center; }
    }
  </style>
</head>
<body>
  <div class="container" role="application" aria-labelledby="app-title">
    <header>
      <h1 id="app-title">üå± Guia de Alimenta√ß√£o Saud√°vel</h1>
      <p class="lead">Escolha seu objetivo e refei√ß√£o para receber uma sugest√£o saud√°vel.</p>
    </header>

    <main>
      <section class="section" aria-labelledby="objetivo-title">
        <h2 id="objetivo-title">Escolha seu objetivo:</h2>
        <div class="btn-grid" role="list" aria-label="Objetivos">
          <button type="button" class="objetivo-btn" data-objetivo="Emagrecimento" aria-pressed="false" role="listitem">üí™ Emagrecimento</button>
          <button type="button" class="objetivo-btn" data-objetivo="Ganho de Massa" aria-pressed="false" role="listitem">üçó Ganho de Massa</button>
          <button type="button" class="objetivo-btn" data-objetivo="Manuten√ß√£o" aria-pressed="false" role="listitem">‚öñÔ∏è Manter peso</button>
        </div>
      </section>

      <section class="section" aria-labelledby="refeicao-title">
        <h2 id="refeicao-title">Escolha a refei√ß√£o:</h2>
        <div class="btn-grid" role="list" aria-label="Refei√ß√µes">
          <button type="button" class="refeicao-btn" data-refeicao="Caf√© da manh√£" aria-pressed="false" role="listitem">‚òÄÔ∏è Caf√© da manh√£</button>
          <button type="button" class="refeicao-btn" data-refeicao="Almo√ßo" aria-pressed="false" role="listitem">üçΩÔ∏è Almo√ßo</button>
          <button type="button" class="refeicao-btn" data-refeicao="Lanche da tarde" aria-pressed="false" role="listitem">üçé Lanche da tarde</button>
          <button type="button" class="refeicao-btn" data-refeicao="Jantar" aria-pressed="false" role="listitem">üåô Jantar</button>
          <button type="button" class="refeicao-btn" data-refeicao="Sobremesa" aria-pressed="false" role="listitem">üçì Sobremesa</button>
        </div>
      </section>

      <div class="resultado" id="resultado" aria-live="polite">
        Escolha seu objetivo e refei√ß√£o para ver a sugest√£o saud√°vel!
      </div>

      <div class="controls" role="group" aria-label="Controles">
        <button id="limpar" class="secondary" type="button">Limpar sele√ß√£o</button>
        <button id="copiar" class="secondary" type="button">Copiar sugest√£o</button>
      </div>
    </main>

    <footer class="footer" aria-hidden="false">
      üåø Cuide do seu corpo, ele √© seu bem mais precioso! Beba √°gua e evite ultraprocessados.
    </footer>
  </div>

  <noscript>
    <div style="max-width:560px;margin:16px auto;padding:12px;background:#fff3e0;border-radius:8px;color:#5d4037;">
      Este app funciona melhor com JavaScript ativado. Ative-o para interagir com as sugest√µes.
    </div>
  </noscript>

  <script>
    (function () {
      'use strict';

      // Persist√™ncia das escolhas
      const storageKey = 'guia-alimentacao:selecoes';

      const alimentos = {
        "Emagrecimento": {
          "Caf√© da manh√£": "ü•£ Iogurte natural com aveia e frutas vermelhas.",
          "Almo√ßo": "ü•ó Frango grelhado, arroz integral e salada verde com azeite.",
          "Lanche da tarde": "üçå Banana com pasta de amendoim e chia.",
          "Jantar": "ü•¶ Sopa de legumes ou omelete com vegetais.",
          "Sobremesa": "üçì Gelatina natural com peda√ßos de frutas."
        },
        "Ganho de Massa": {
          "Caf√© da manh√£": "üç≥ Ovos mexidos, aveia, banana e pasta de amendoim.",
          "Almo√ßo": "üçõ Arroz, feij√£o, carne magra e batata-doce.",
          "Lanche da tarde": "ü•§ Shake de whey protein com aveia e frutas.",
          "Jantar": "üç† Peixe ou frango com arroz integral e legumes cozidos.",
          "Sobremesa": "üç´ Iogurte com granola e mel natural."
        },
        "Manuten√ß√£o": {
          "Caf√© da manh√£": "ü•£ Tapioca com ovo e suco natural.",
          "Almo√ßo": "ü•ó Frango grelhado, arroz integral e legumes variados.",
          "Lanche da tarde": "üçé Mix de castanhas e frutas.",
          "Jantar": "üç≤ Sopa de legumes com frango desfiado.",
          "Sobremesa": "üçå Banana amassada com canela."
        }
      };

      let objetivo = '';
      let refeicao = '';

      const resultadoEl = document.getElementById('resultado');
      const objetivoBtns = Array.from(document.querySelectorAll('.objetivo-btn'));
      const refeicaoBtns = Array.from(document.querySelectorAll('.refeicao-btn'));
      const limparBtn = document.getElementById('limpar');
      const copiarBtn = document.getElementById('copiar');

      // Restaura sele√ß√£o do localStorage
      function restore() {
        try {
          const raw = localStorage.getItem(storageKey);
          if (!raw) return;
          const parsed = JSON.parse(raw);
          if (parsed.objetivo) setObjetivo(parsed.objetivo, {announce:false});
          if (parsed.refeicao) setRefeicao(parsed.refeicao, {announce:false});
        } catch (e) {
          // ignore
        }
      }

      function save() {
        try {
          localStorage.setItem(storageKey, JSON.stringify({objetivo, refeicao}));
        } catch (e) { /* ignore */ }
      }

      function clearSelection() {
        objetivo = '';
        refeicao = '';
        objetivoBtns.forEach(b => { b.setAttribute('aria-pressed','false'); b.classList.remove('selected'); });
        refeicaoBtns.forEach(b => { b.setAttribute('aria-pressed','false'); b.classList.remove('selected'); });
        resultadoEl.textContent = 'Escolha seu objetivo e refei√ß√£o para ver a sugest√£o saud√°vel!';
        save();
      }

      function announce(text) {
        // aria-live already handles announcing when innerText changes
        resultadoEl.textContent = text;
      }

      function setObjetivo(obj, opts = {announce:true}) {
        objetivo = obj;
        objetivoBtns.forEach(b => {
          const is = b.dataset.objetivo === obj;
          b.setAttribute('aria-pressed', String(is));
          b.classList.toggle('selected', is);
        });
        if (opts.announce) announce(`Objetivo selecionado: ${obj}. Agora escolha a refei√ß√£o.`);
        save();
      }

      function setRefeicao(ref, opts = {announce:true}) {
        if (!objetivo) {
          // foco para o primeiro objetivo e mensagem curta
          objetivoBtns[0].focus();
          announce('Primeiro selecione seu objetivo.');
          return;
        }
        refeicao = ref;
        refeicaoBtns.forEach(b => {
          const is = b.dataset.refeicao === ref;
          b.setAttribute('aria-pressed', String(is));
          b.classList.toggle('selected', is);
        });
        const sugestao = alimentos[objetivo] && alimentos[objetivo][refeicao] ? alimentos[objetivo][refeicao] : 'Sugest√£o indispon√≠vel.';
        const mensagem = `Objetivo: ${objetivo}. Refei√ß√£o: ${refeicao}. Sugest√£o: ${sugestao} ‚Äî Dica: Beba bastante √°gua e evite ultraprocessados.`;
        announce(mensagem);
        save();
      }

      // Event wiring: click + keyboard support (Enter / Space)
      function wireButtons(list, handler, dataAttr) {
        list.forEach(btn => {
          btn.addEventListener('click', () => handler(btn.dataset[dataAttr]));
          btn.addEventListener('keydown', (ev) => {
            if (ev.key === 'Enter' || ev.key === ' ') {
              ev.preventDefault();
              handler(btn.dataset[dataAttr]);
            }
          });
        });
      }

      wireButtons(objetivoBtns, setObjetivo, 'objetivo');
      wireButtons(refeicaoBtns, setRefeicao, 'refeicao');

      limparBtn.addEventListener('click', clearSelection);
      limparBtn.addEventListener('keydown', (e) => { if (e.key==='Enter' || e.key===' ') e.preventDefault(); });

      copiarBtn.addEventListener('click', async () => {
        // copia o texto atual do bloco de resultado
        const text = resultadoEl.innerText || resultadoEl.textContent;
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(text);
            const prev = resultadoEl.textContent;
            resultadoEl.textContent = 'Sugest√£o copiada para a √°rea de transfer√™ncia!';
            setTimeout(() => { resultadoEl.textContent = prev; }, 1500);
          } else {
            // fallback
            const ta = document.createElement('textarea');
            ta.value = text;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
            resultadoEl.textContent = 'Sugest√£o copiada para a √°rea de transfer√™ncia!';
            setTimeout(() => restore(), 1200);
          }
        } catch (err) {
          resultadoEl.textContent = 'N√£o foi poss√≠vel copiar. Selecione e copie manualmente.';
        }
      });

      // inicializa restaurando se poss√≠vel
      restore();

    })();
  </script>
</body>
</html>